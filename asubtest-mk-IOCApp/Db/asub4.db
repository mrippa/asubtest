record(aSub,"$(user):asubtx") {
    field(LFLG,"IGNORE")
    field(EFLG,"ALWAYS")
    field(INAM,"init_my_asub")
    field(SNAM,"my_asubtx")
    field(NOA, "4096")
    field(FTA, "LONG")
    field(FTVA, "LONG")
    field(OUTA, "tcs:asubrx CPP")
    field(FLNK, "mc:asubrx.PROC")
}

record(aSub, "$(user):asubrx") {
    field(LFLG,"IGNORE")
    field(EFLG,"ALWAYS")
    field(INAM,"init_asubrx")
    field(SNAM,"my_asubrx")
    field(INPA, "sim3:asubtx.VALA CPP")
    field(NOA, "$(nsamples)")
    field(NOVA, "$(nsamples)")
    field(NOVB, "5")
    field(FTA, "LONG")
    field(FTVA, "LONG")
    field(FTVB, "DOUBLE")
    field(OUTB, "mc:tdiff.A CPP")
}

record(aSub, "$(user):tdiff") {
    field(LFLG,"IGNORE")
    field(EFLG,"ON CHANGE")
    field(INAM,"")
    field(SNAM,"tdiff_proc")
    field(NOA, "5")
    field(NOVA, "5")
    field(FTA, "DOUBLE")
    field(FTVA, "DOUBLE")
}

#Count to 9, then back to 0.
record(calc, "$(user):calc") {
    field(DESC, "Counter")
    field(SCAN,"1 second")
    field(FLNK, "$(user):aiExample")
    field(CALC, "(A<B)?(A+C):D")
    field(INPA, "$(user):calc.VAL  NPP NMS")
    field(INPB, "9")
    field(INPC, "1")
    field(INPD, "0")
    field(EGU, "Counts")
    field(HOPR, "10")
    field(HIHI, "8")
    field(HIGH, "6")
    field(LOW, "4")
    field(LOLO, "2")
    field(HHSV, "MAJOR")
    field(HSV, "MINOR")
    field(LSV, "MINOR")
    field(LLSV, "MAJOR")
}

#Track the calc record 
record(ai, "$(user):aiExample")
{
    field(DESC, "Analog input")
    field(INP, "$(user):calc.VAL  NPP NMS")
    field(EGUF, "10")
    field(EGU, "Counts")
    field(HOPR, "10")
    field(LOPR, "0")
    field(HIHI, "8")
    field(HIGH, "6")
    field(LOW, "4")
    field(LOLO, "2")
    field(HHSV, "MAJOR")
    field(HSV, "MINOR")
    field(LSV, "MINOR")
    field(LLSV, "MAJOR")
}

#CB of ai record used to populate the array of asub
record(compress,"$(user):compressExample")
{
    field(DESC, "Circular buffer")
    field(INP,"$(user):asubrx.VALT PP NMS")
    field(ALG,"Circular Buffer")
    field(NSAM,"10")
    field(HOPR,"10")
    field(EGU,"Counts")
}

record(aSub,"$(user):followA") {
    field(DESC,"Array Subroutine Record")
    field(SCAN,"Passive")
    field(PINI,"NO")
    field(PHAS,"0")
    field(EVNT,"0")
    field(DISV,"1")
    field(PREC,"0")
    field(LFLG,"IGNORE")
    field(EFLG,"ALWAYS")
    field(SDIS,"0.0000000000000000e+00")
    field(DISS,"NO_ALARM")
    field(PRIO,"LOW")
    field(FLNK,"")
    field(BRSV,"NO_ALARM")
    field(INAM,"initFollowA")
    field(SNAM,"FollowA")
    field(FTA,"LONG")
    field(FTB,"DOUBLE")
    field(FTC,"DOUBLE")
    field(FTD,"DOUBLE")
    field(FTE,"DOUBLE")
    field(FTF,"DOUBLE")
    field(FTG,"DOUBLE")
    field(FTH,"DOUBLE")
    field(FTI,"DOUBLE")
    field(FTJ,"DOUBLE")
    field(FTVA,"DOUBLE")
    field(FTVB,"DOUBLE")
    field(FTVC,"DOUBLE")
    field(FTVD,"LONG")
    field(FTVE,"LONG")
    field(FTVF,"DOUBLE")
    field(FTVG,"DOUBLE")
    field(FTVH,"DOUBLE")
    field(FTVI,"DOUBLE")
    field(FTVJ,"DOUBLE")
    field(NOA,"1")
    field(NOB,"1")
    field(NOC,"1")
    field(NOD,"1")
    field(NOE,"1")
    field(NOF,"1")
    field(NOG,"1")
    field(NOH,"1")
    field(NOI,"1")
    field(NOJ,"5")
    field(NOVA,"5")
    field(NOVB,"5")
    field(NOVC,"5")
    field(NOVD,"1")
    field(NOVE,"1")
    field(NOVF,"1")
    field(NOVG,"1")
    field(NOVH,"1")
    field(NOVI,"1")
    field(NOVJ,"1")
    field(INPA,"$(user)TCSLogging.VAL NPP NMS")
    field(INPB,"0.000000000000000e+00")
    field(INPC,"0.000000000000000e+00")
    field(INPD,"0.000000000000000e+00")
    field(INPE,"0.000000000000000e+00")
    field(INPF,"0.0000000000000000e+00")
    field(INPG,"0.0000000000000000e+00")
    field(INPH,"0.0000000000000000e+00")
    field(INPI,"0.0000000000000000e+00")
    field(INPJ,"0.0000000000000000e+00")
    field(OUTA,"0.000000000000000e+00")
    field(OUTB,"0.000000000000000e+00")
    field(OUTC,"0.000000000000000e+00")
    field(OUTD,"0.000000000000000e+00")
    field(OUTE,"0.000000000000000e+00")
    field(OUTF,"0.000000000000000e+00")
    field(OUTG,"0.000000000000000e+00")
    field(OUTH,"0.000000000000000e+00")
    field(OUTI,"0.000000000000000e+00")
    field(OUTJ,"0.000000000000000e+00")
}
record(bi,"$(user)TCSLogging") {
    field(DESC,"binary input record")
    field(SCAN,"Passive")
    field(PINI,"NO")
    field(PHAS,"0")
    field(EVNT,"0")
    field(DTYP,"Soft Channel")
    field(DISV,"1")
    field(SDIS,"0.000000000000000e+00")
    field(DISS,"NO_ALARM")
    field(PRIO,"LOW")
    field(FLNK,"0.000000000000000e+00")
    field(INP,"0.000000000000000e+00")
    field(ZSV,"NO_ALARM")
    field(OSV,"NO_ALARM")
    field(COSV,"NO_ALARM")
    field(ZNAM,"OFF")
    field(ONAM,"ON")
    field(SIOL,"0.000000000000000e+00")
    field(SIML,"0.000000000000000e+00")
    field(SIMS,"NO_ALARM")
}

